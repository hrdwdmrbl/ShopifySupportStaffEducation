<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopify Incoming Inventory API Issues Explained</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8fafc; /* slate-50 */
      }
      .container {
        max-width: 800px;
      }
      .card {
        background-color: white;
        border-radius: 0.75rem; /* rounded-xl */
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        border: 1px solid #e2e8f0; /* slate-200 */
      }
      .card-header {
        border-bottom: 1px solid #e2e8f0; /* slate-200 */
      }
      code {
        background-color: #f1f5f9; /* slate-100 */
        color: #475569; /* slate-600 */
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.9em;
      }
      .key-insight {
        background-color: #ffedd5; /* orange-100 */
        border-left: 4px solid #fb923c; /* orange-400 */
        color: #9a3412; /* orange-900 */
      }
    </style>
  </head>
  <body class="text-slate-800">
    <main class="container mx-auto p-4 md:p-8">
      <!-- Header Section -->
      <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-slate-900 mb-2">Shopify Incoming Inventory API Issues</h1>
        <p class="text-lg text-slate-600">
          A clear explanation of two fundamental problems affecting app developers and merchants.
        </p>
      </header>

      <!-- The Core Problem Section -->
      <section class="mb-12">
        <div class="card p-6 md:p-8 key-insight">
          <h2 class="text-xl font-bold mb-3 text-orange-900">The Most Critical Point</h2>
          <p class="text-base md:text-lg">
            The root of these issues is that an app cannot distinguish its own contribution to "Incoming" inventory from
            inventory coming from other sources (like Shopify Purchase Orders). The API only exposes the
            <strong>net total</strong>, leading to unpredictable and uncorrectable behavior.
          </p>
        </div>
      </section>

      <!-- Issue 1 Section -->
      <section id="issue-1" class="mb-12">
        <div class="card">
          <div class="card-header p-6">
            <h2 class="text-2xl font-bold text-slate-900">
              Issue 1: "Stuck" Incoming Inventory After App Uninstallation
            </h2>
          </div>
          <div class="p-6 text-slate-700 space-y-4">
            <p>
              When a merchant uninstalls an app, Shopify immediately severs all permissions. This prevents the app from
              performing any cleanup operations.
            </p>
            <p>
              Although apps are required to delete their data upon uninstallation, any "incoming" inventory adjustments
              they created remain tied to the product. Because the app's connection is terminated, it has no opportunity
              to "zero out" these leftover quantities.
            </p>
            <p>
              This leaves the inventory in a "stuck" state. The merchant cannot resolve these lingering incoming figures
              because the app that created them is no longer present to manage them. Reinstalling the app is the only
              potential fix, but this does not address the underlying API limitation described in Issue 2.
            </p>
          </div>
        </div>
      </section>

      <!-- Issue 2 Section -->
      <section id="issue-2" class="mb-12">
        <div class="card">
          <div class="card-header p-6">
            <h2 class="text-2xl font-bold text-slate-900">
              Issue 2: Apps Cannot "Zero Out" Their Own Incoming Inventory
            </h2>
          </div>
          <div class="p-6 text-slate-700 space-y-4">
            <p>
              An app cannot isolate and remove only its own contribution to a product's "incoming" inventory. This
              problem stems from the behavior of the <code>inventoryAdjustQuantities</code> GraphQL mutation.
            </p>

            <blockquote class="border-l-4 border-slate-300 pl-4 italic text-slate-600">
              The API only allows an app to see and modify the <strong>net total</strong> incoming inventory, which is
              the sum of all sources (Shopify POs + App adjustments).
            </blockquote>

            <p>This creates a paradox when an app attempts to "zero out" its influence:</p>
            <ol class="list-decimal list-inside space-y-2 pl-2">
              <li>A product has <strong>+100 units</strong> incoming from a Shopify Purchase Order.</li>
              <li>
                An app, intending to set its own contribution to 0, uses the API to set the total incoming quantity to
                0.
              </li>
              <li>
                To make the math work (<code>100 - 100 = 0</code>), Shopify's system forces the app's contribution to
                become <strong>-100 units</strong>.
              </li>
              <li>
                The app is now "stuck." It cannot know that its value is negative because it can only see the net total
                (which is 0). It has no way to see the +100 from the Shopify PO and is therefore unable to ever truly
                correct its own value back to zero.
              </li>
            </ol>
          </div>
        </div>
      </section>

      <!-- FAQ Section -->
      <section id="faq" class="mb-12">
        <h2 class="text-3xl font-bold text-center mb-8 text-slate-900">Frequently Asked Questions</h2>
        <div class="space-y-6">
          <div class="card p-6">
            <h3 class="font-semibold text-lg text-slate-800 mb-2">
              Q: Is this caused by an app failing to delete its purchase orders?
            </h3>
            <p class="text-slate-700">
              A: No. The issue is not dependent on app-created purchase orders and can occur even if an app is never
              uninstalled. The core problem lies in how the API calculates and exposes incoming inventory, not in app
              data management.
            </p>
          </div>

          <div class="card p-6">
            <h3 class="font-semibold text-lg text-slate-800 mb-2">
              Q: Why can't the app just fix the negative inventory?
            </h3>
            <p class="text-slate-700">
              A: An app cannot see its own inventory value versus Shopify's. It only sees the net total. To "fix" a -100
              value it doesn't know exists, it would need to know the Shopify PO quantity (+100) and add that amount.
              The API provides no way for the app to get this information.
            </p>
          </div>

          <div class="card p-6">
            <h3 class="font-semibold text-lg text-slate-800 mb-2">
              Q: Doesn't the <code>inventoryAdjustQuantities</code> mutation only affect "Available" inventory?
            </h3>
            <p class="text-slate-700">
              A: No, that is incorrect. This mutation is the only API available for an app to programmatically adjust
              "Incoming" inventory quantities. This issue has absolutely nothing to do with "Available" inventory.
            </p>
          </div>

          <div class="card p-6">
            <h3 class="font-semibold text-lg text-slate-800 mb-2">
              Q: Is the app deleting or nullifying Shopify Purchase Orders?
            </h3>
            <p class="text-slate-700">
              A: No. There is no API for an app to delete Shopify Purchase Orders. The app's action of setting the net
              incoming inventory to zero has the <em>effect</em> of nullifying the quantity from a Shopify PO, but it
              does so by creating an offsetting negative balance attributed to the app.
            </p>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="text-center text-slate-500 text-sm pt-8">
        <p>
          This document was created to provide a clear, factual explanation of systemic API issues. Last updated: June
          23, 2025.
        </p>
      </footer>
    </main>
  </body>
</html>
